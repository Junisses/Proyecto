{% extends "index.html"%}
{% load static %}
{% block contenido%}
<head>
	<link rel="stylesheet" href="{% static 'css/baseinicio.css' %}">
</head>
<section><!-- Carrusel -->
    <div id="carousel" class="carousel slide carousel-fade" data-ride="carousel" data-interval="4000">
        <ol class="carousel-indicators">
            <li data-target="#carousel" data-slide-to="0" class="active"></li>
            <li data-target="#carousel" data-slide-to="1"></li>
        </ol>
        <div class="carousel-inner" role="listbox">
            <!-- imagen 1 -->            
			<div class="carousel-item active">
                <a href="">
                     <picture>
                      <img src="{% static '/img/fotos/REPUESTOS1.png' %}" alt="responsive image" class="d-block img-fluid">
                      </picture>
                </a> 
            </div>
            <!-- imagen 2-->
            <div class="carousel-item">
                <a href="">
                     <picture>
                      <img src="{% static '/img/fotos/REPUESTOS2.png' %}"  alt="responsive image" class="d-block img-fluid"> 
                    </picture>
                </a>
            </div>
        </div>
        <!-- Flechas -->
        <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <!-- /.carousel -->
</section>			



<form method="post" action="/probar" enctype="multipart/form-data">
	<br>
	{% csrf_token %}
	<div class="row justify-content-center">
		<div class="col-3">
				<div class="form-group"> 
					<input type="hidden" name="marca">
						<label>Marca del veh√≠culo: </label>
						{{ form.marcas }}
				</div>
		</div>
		<div class="col-3">
				<div class="form-group">
					<input type="hidden" name="modelo">
						<label>Modelo: </label>
						{{ form.modelos }}
				</div>
		</div>
		<div class="col-3">
				<div class="form-group">
					<input type="hidden" name="categoria">
						<label>Categoria: </label>
						{{ form.categoria }}
				</div>
		</div>
		<div class="col-3">
				<div class="form-group">
					<input type="hidden" name="repuesto">
						<label>Repuesto: </label>
						{{ form.repuestos }}
				</div>
		</div>
		<button>
		
	</div>
</form>
	
	<script>
	$(function () {
			$('select[name="marcas"]').on('change', function () {
				var id = $(this).val();
				var select_modelos = $('select[name="modelos"]');
				var options = '<option value="">---------</option>';
				if(id == '') {
					select_modelos.html(options);
					return false;
					}
				$.ajax({
					url: window.location.pathname,
					type: 'POST',
					data: {
						'action': 'search_modelo_id',
						'id': id
					},
					dataType: 'json',
				}).done(function (data) {
					if (!data.hasOwnProperty('error')) {
						$.each(data, function (key,value) {
							options += '<option value ="'+value.id+'">'+value.name+'</option>';
						});
						return false;
					}
					}).fail(function(jqXHR, textStatus, errorThrown) {
						alert(textStatus + ': ' + errorThrown);
					}).always(function(data) {
						select_modelos.html(options);
					});
			});
			$('select[name="categoria"]').on('change', function () {
				var id = $(this).val();
				var select_repuestos = $('select[name="repuestos"]');
				var options = '<option value="">---------</option>';
				if(id == '') {
					select_repuestos.html(options);
					return false;
					}
				$.ajax({
					url: window.location.pathname,
					type: 'POST',
					data: {
						'action': 'search_repuesto_id',
						'id': id
					},
					dataType: 'json',
				}).done(function (data) {
					if (!data.hasOwnProperty('error')) {
						$.each(data, function (key,value) {
							options += '<option value ="'+value.id+'">'+value.name+'</option>';
						});
						return false;
					}
					}).fail(function(jqXHR, textStatus, errorThrown) {
						alert(textStatus + ': ' + errorThrown);
					}).always(function(data) {
						select_repuestos.html(options);
					});
			});
		});
	</script>

<!-- Opcion de select dependiente con html y jquery
<div>
   <select id="primary">
	  <option value="">Selecciona una marca</option>
      <option value="color">DongFeng</option>
      <option value="country">Foton</option>
   </select> 
   <select id="secondary">	
		<option value="color">Seleccione un modelo</option>
   </select>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script>
	var options = {
			color : ["ZNA4","ZNA6","ZNA1"],
			country : ["MIDI simple","MIDI doble","Camion"]
	}

	$(function(){
		var fillSecondary = function(){
			var selected = $('#primary').val();
			$('#secondary').empty();
			options[selected].forEach(function(element,index){
				$('#secondary').append('<option value="'+element+'">'+element+'</option>');
			});
		}
		$('#primary').change(fillSecondary);
		fillSecondary();
	});
</script>


<div id="carta-lista" class="cards-list">
  
	<div id="carta" class="card 1" style="background-color: #EDEDED; border-color: #EDEDED;">
	  <div id="img_carta" class="card_image"> 
			<a href="/repuestosDongFeng">
				<img src="https://img.favcars.com/dongfeng/yumsun/images_dongfeng_yumsun_2009_1_b.jpg" width="200" height="50"  />
			</a>
	   </div>
	  <div class="card_title title-white">
		<p>DongFeng</p>
	  </div>
	<br> <br>
	</div>

	  <div id="carta" class="card 2" style="background-color: #EDEDED; border-color: #EDEDED;">
	  <div id="img_carta" class="card_image">
		<a href="/repuestosFoton">
			<img src="https://www.revistaturbo.com/sites/default/files/camionefoton.jpg" width="200" height="50" />
		</a>
	   </div>
	  <div class="card_title title-white">
		<p>Foton</p>
	  </div>
	</div>
	  </div>
</div>-->
{% endblock %}